/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={"./scripts/app.ts":(e,t,n)=>{n.r(t),n.d(t,{appProps:()=>d,init:()=>v});var i=n("./scripts/ball.ts"),r=n("./scripts/images.ts"),o=n("./scripts/utility.ts");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={count:0,radiusSizes:{s:40,m:40,l:50,current:50},screenBreakPoints:{l:1280,m:768},gravity:{value:.01,isOn:!1,btn:document.getElementById("gravity-btn")},balls:[],selectedImgEle:null,selectedBall:null,selectedPositions:{prev:{x:0,y:0},current:{x:0,y:0},reference:{x:0,y:0}},selectedAngleThreshold:10,mouseMoveDistThreshold:10,velocityThreshould:.05,overlapThreshold:.05,wallModifiers:{left:1.1,right:1.1,top:1,bottom:1.8},currentTime:0,selectedTime:0,deceleration:.995,canvas:document.getElementById("canvas"),canvasHorizontalGap:10,canvasTopOffset:70,party:{isActive:!1,start:0,duration:1e4,maxVelocity:2,minVelocity:.5,wallModRef:{left:1,right:1,top:1,bottom:1},gravityRef:!0,colourRef:[],partyBtn:document.getElementById("party-btn")},rainBow:["#ff0000","#ffa500","#ffff00","#008000","#0000ff","#4b0082","#ee82ee"]};function v(){!function(){var e;window.onresize=function(){p()},d.canvas.addEventListener("pointerdown",b),d.canvas.addEventListener("pointermove",w),d.canvas.addEventListener("pointerup",x),d.canvas.addEventListener("pointerleave",O);var t=document.getElementById("gravity-btn");null==t||t.addEventListener("click",(function(){d.party.isActive||(d.gravity.isOn=!d.gravity.isOn,y(d.gravity.isOn))})),null===(e=document.getElementById("party-btn"))||void 0===e||e.addEventListener("click",(function(){!function(){var e;if(d.party.start=(new Date).getTime(),null===(e=document.getElementById("party-btn"))||void 0===e||e.classList.add("btn-progress-bar"),d.party.isActive)return void d.balls.forEach((function(e){e.velocity=g()}));d.party.gravityRef=d.gravity.isOn,d.gravity.isOn=!1,y(d.gravity.isOn),d.party.wallModRef=s({},d.wallModifiers),d.wallModifiers={left:1,right:1,top:1,bottom:1},d.party.isActive=!0,d.balls.forEach((function(e){d.party.colourRef[e.id]=[Math.floor(Math.random()*d.rainBow.length),0],e.velocity=g()}))}()}))}(),p(),Promise.all(r.imageList.map((function(e){return(0,r.addImage)(e,r.imageCache,50)}))).then((function(e){d.currentTime=(new Date).getTime(),window.requestAnimationFrame(f)}))}function y(e){var t,n;e?null===(t=d.gravity.btn)||void 0===t||t.classList.add("bounce-selected"):null===(n=d.gravity.btn)||void 0===n||n.classList.remove("bounce-selected")}function p(){try{if(null===d.canvas)throw new Error("canvas is null");var e=window.innerWidth-50,t=window.innerHeight-30;e<d.screenBreakPoints.m?d.radiusSizes.current=d.radiusSizes.s:e<d.screenBreakPoints.l?d.radiusSizes.current=d.radiusSizes.m:d.radiusSizes.current=d.radiusSizes.l,d.canvas.width=e-d.canvasHorizontalGap,d.canvas.height=t-d.canvasTopOffset,d.balls.forEach((function(e){return e.radius=d.radiusSizes.current}))}catch(e){console.error(e)}}function f(){var e,t,n,i,r=d.canvas.getContext("2d"),l=(new Date).getTime()-d.currentTime;if(d.currentTime=(new Date).getTime(),d.party.isActive){r.fillStyle="rgba(220, 219, 6, 0.1)",r.fillRect(0,0,d.canvas.width,d.canvas.height);var c=(new Date).getTime()-d.party.start,u=c/d.party.duration*100;c>d.party.duration?(u=0,d.party.isActive=!1,d.wallModifiers=s({},d.party.wallModRef),d.gravity.isOn=d.party.gravityRef,y(d.gravity.isOn),d.party.colourRef=[]):d.party.colourRef.forEach((function(e,t){d.party.colourRef[t]=[e[0],c]})),e=d.party.partyBtn,t=u,e.style.backgroundPosition="".concat(t,"% 100%")}else r.clearRect(0,0,d.canvas.width,d.canvas.height);d.balls.forEach((function(e){e.selected||h(r,e),function(e,t){var n=e.position,i=e.selected,r=e.velocity;if(!i){e.prevPosition=s({},n);var l=d.gravity.value/3;Math.abs(e.velocity.vX)<l&&(e.velocity.vX=0),Math.abs(e.velocity.vY)<l&&(e.velocity.vY=0),d.gravity.isOn&&(r.vY+=d.gravity.value);var c=r.vX*t;n.x+=c,n.y+=r.vY*t,r.vX*=d.deceleration,function(e){var t=[];if(d.balls.forEach((function(n){e.id===n.id||n.selected||e.getOverlap(n)>d.overlapThreshold&&t.push(n)})),t.length>0){t.sort((function(t,n){return o.util.distanceBetween2Points(e.position,t.position)-o.util.distanceBetween2Points(e.position,n.position)})),e.reversePosition(e.getOverlap(t[0]));var n=a(function(e,t){var n=s({},e.velocity),i=s({},t.velocity);e.checkBallCollision(t)&&(n=o.util.getBallCollisionVelocity(e,t),i=o.util.getBallCollisionVelocity(t,e));return[n,i]}(e,t[0]),2),i=n[0],r=n[1];e.velocity=i,t[0].velocity=r}t=[]}(e),function(e){var t=e.position,n=e.radius,i=e.velocity,r=d.canvas,o=d.wallModifiers;t.x+n>r.width&&(t.x=r.width-n,i.vX<0||(e.velocity.vX*=-1/o.right),Math.abs(i.vX)<.05&&(i.vX=0));t.x-n<0&&(t.x=n,i.vX>0||(e.velocity.vX*=-1/o.left),Math.abs(i.vX)<.05&&(i.vX=0));t.y+n>r.height&&(t.y=r.height-n,i.vY<0||(e.velocity.vY*=-1/o.bottom),Math.abs(i.vY)<.05&&(i.vY=0));t.y-n<0&&(t.y=n,i.vY>0||(e.velocity.vY*=-1/o.top))}(e)}}(e,l)})),n=d.balls,i=function(e){var t=[];return e.forEach((function(e){var n=t.findIndex((function(t){return e.position.y>t.position.y||e.position.y===t.position.y&&e.position.x<t.position.x}));-1===n?t.push(e):t.splice(n,0,e)})),t}(n),i.forEach((function(e){!e.selected&&i.forEach((function(t){if(!t.selected){var n=e.getOverlap(t);if(!(n<d.overlapThreshold)){var i=e.position.y-t.position.y;if(e.id!==t.id&&n>.03){var r=a(o.util.xyDiffBetweenPoints(e.position,t.position),2),l=r[0],c=r[1],s=Math.abs(l)+Math.abs(c),u=l/s*n,v=c/s*n;0===i?(e.position.x-=.5*n,t.position.x+=.5*n):i>0?(t.position.x+=u,t.position.y+=v):(e.position.x+=u,e.position.y+=v)}}}}))})),d.balls.forEach((function(e){e.selected||(e.rotation+=function(e){var t=2*Math.PI*e.radius;return(e.position.x-e.prevPosition.x)/t*360}(e))})),h(r,d.selectedBall),window.requestAnimationFrame((function(){f()}))}function h(e,t){if(null!==t){var n=t.id,i=t.position,r=t.radius,o=t.selected,a=t.rotation,l=t.img;e.save(),e.translate(i.x,i.y),e.rotate(Math.PI/180*a),e.drawImage(l,-r,-r,2*r,2*r),d.party.isActive&&(e.lineWidth=Math.round(r/10)+1,e.strokeStyle=d.rainBow[(d.party.colourRef[n][0]+Math.floor(d.party.colourRef[n][1]/1e3))%d.rainBow.length],e.beginPath(),e.arc(0,0,r,0,2*Math.PI),e.stroke()),o&&(e.lineWidth=4,e.strokeStyle="cyan",e.beginPath(),e.arc(0,0,r,0,2*Math.PI),e.stroke()),e.restore()}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.party.maxVelocity,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.party.minVelocity,n=-1,i=-1;return Math.random()>.5&&(n=1),Math.random()>.5&&(i=1),{vX:Math.max(Math.random()*t,e)*n,vY:Math.max(Math.random()*t,e)*i}}function m(e){var t=e.target.getBoundingClientRect();return[e.clientX-t.x,e.clientY-t.y]}function b(e){if(0===e.button){var t=a(m(e),2),n=t[0],o=t[1];d.selectedImgEle?d.selectedBall=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.radiusSizes.current,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{var l=Number(e.dataset.index),c=new i.Ball(r.imageCache[l],t,n,o,a);return d.balls.push(c),d.count++,d.party&&(d.party.colourRef[c.id]=[Math.floor(Math.random()*d.rainBow.length),0]),c}catch(e){console.error(e)}}(d.selectedImgEle,n,o)||null:d.selectedBall=d.balls.find((function(e){return e.containsPoint(n,o)}))||null,d.selectedBall&&(d.selectedTime=(new Date).getTime(),d.selectedBall.selected=!0,d.selectedBall.velocity={vX:0,vY:0},d.selectedPositions.current={x:n,y:o},d.selectedPositions.prev={x:n,y:o},d.selectedPositions.reference={x:n,y:o})}}function w(e){if(d.selectedBall){var t=a(m(e),2),n=t[0],i=t[1],r=a(o.util.xyDiffBetweenPoints(d.selectedPositions.current,{x:n,y:i}),2),l=r[0],c=r[1];if(d.selectedBall.move(l,c),d.selectedPositions.current={x:n,y:i},o.util.distanceBetween2Points({x:n,y:i},d.selectedPositions.prev)>d.mouseMoveDistThreshold){var s=d.selectedPositions,u=s.reference,v=s.prev,y=s.current;(o.util.angleBetween3Points(u,v,y)||0)>d.selectedAngleThreshold&&(d.selectedPositions.reference={x:n,y:i},d.selectedTime=(new Date).getTime()),d.selectedPositions.prev={x:n,y:i}}}}function x(e){if(d.selectedBall){try{var t=a(m(e),2),n=t[0],i=t[1],r=a(o.util.xyDiffBetweenPoints(d.selectedPositions.reference,{x:n,y:i}),2),l=r[0],c=r[1],s=(new Date).getTime()-d.selectedTime;d.selectedBall.velocity.vX=l/s,d.selectedBall.velocity.vY=c/s}catch(e){d.selectedBall.position={x:50,y:50},console.error(e)}d.selectedBall.selected=!1,d.selectedBall=null}}function O(e){d.selectedBall&&(d.selectedBall.selected=!1,d.selectedBall.velocity={vX:0,vY:0},d.selectedBall=null)}},"./scripts/ball.ts":(e,t,n)=>{n.r(t),n.d(t,{Ball:()=>s});var i=n("./scripts/utility.ts");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a(this,e),this.id=e.baseId,this.position={x:n,y:i},this.prevPosition={x:n,y:i},this.radius=r,this.rotation=0,this.velocity={vX:0,vY:0},this.img=t,this.selected=o,e.baseId++}var t,n,r;return t=e,(n=[{key:"move",value:function(e,t){this.position.x+=e,this.position.y+=t}},{key:"reversePosition",value:function(e){if(0===this.getTotalVelocity());else{var t=-1*Math.sqrt(Math.pow(e,2)/(Math.pow(this.velocity.vX,2)+Math.pow(this.velocity.vY,2)));this.position.x+=this.velocity.vX*t,this.position.y+=this.velocity.vY*t}}},{key:"getTotalVelocity",value:function(){return Math.sqrt(Math.pow(this.velocity.vX,2)+Math.pow(this.velocity.vY,2))}},{key:"containsPoint",value:function(e,t){return Math.pow(e-this.position.x,2)+Math.pow(t-this.position.y,2)<=Math.pow(this.radius,2)}},{key:"getOverlap",value:function(e){var t=i.util.distanceBetween2Points(this.position,e.position),n=this.radius+e.radius-t;return n>=0?n:-1}},{key:"checkBallCollision",value:function(e){if(this.getOverlap(e)>=0){var t=i.util.xyDiffBetweenPoints(this.position,e.position);return(i.util.angleBetween2DVector(this.velocity.vX,this.velocity.vY,t[0],t[1])||0)<=90}return!1}},{key:"getCircle",value:function(){return o(o({},this.position),{},{r:this.radius})}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();c(s,"baseId",1)},"./scripts/images.ts":(e,t,n)=>{n.r(t),n.d(t,{addImage:()=>d,appendImgElemToContainer:()=>v,createImgEleWithIndex:()=>y,imageCache:()=>u,imageList:()=>c,imgContainerScrollUpDown:()=>h,scrollToImgElement:()=>f,toggleSelectedImgElement:()=>p});var i,r=n("./scripts/app.ts"),o=n("./scripts/utility.ts");function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var c=["me.jpeg","grumpy.webp","smileface.webp","spongebob.webp","pepper.png"].map((function(e){return"https://raw.githubusercontent.com/seegg/bounce/main/images/"+e})).concat([]),s=document.getElementById("bounce-img-container");null===(i=document.getElementById("ball-scroll-controls"))||void 0===i||i.addEventListener("pointerdown",h);var u=[];function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,r=["bounce-img-thumb","grayscale"],a=document.createElement("img");return a.classList.add("bounce-img-thumb"),a.src="images/spinner.gif",null==i||i.appendChild(a),o.util.createCircleImg(e,n).then((function(n){var i=t.push(n)-1;return y(e,i,r)})).then((function(e){if(null===i)throw new Error("image container is null");v(e,i,a)})).catch((function(e){null==i||i.removeChild(a),console.error(e)}))}function v(e,t,n){n?t.replaceChild(e,n):t.append(e)}function y(e,t,n){var i,r=document.createElement("img");return(i=r.classList).add.apply(i,a(n)),r.onclick=function(e){p(e.target)},r.setAttribute("data-index",t+""),r.onload=function(){URL.revokeObjectURL(e)},r.src=e,r}function p(e){var t,n="grayscale";null===(t=r.appProps.selectedImgEle)||void 0===t||t.classList.toggle(n),e===r.appProps.selectedImgEle?r.appProps.selectedImgEle=null:(e.classList.toggle(n),r.appProps.selectedImgEle=e),f(e)}function f(e){var t=document.getElementById("img-container"),n=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop;t.scroll(0,n)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:48;e.preventDefault();var i=t.scrollTop%n;switch(e.target.id){case"img-up":t.scroll(0,0===i?t.scrollTop-n:t.scrollTop-i);break;case"img-down":t.scroll(0,t.scrollTop+n-i)}}},"./scripts/modal.ts":(e,t,n)=>{n.r(t),n.d(t,{modalInit:()=>l});var i=n("./scripts/app.ts"),r=n("./scripts/images.ts"),o={modal:document.getElementById("modal"),overlay:document.getElementById("modal-overlay"),openButton:document.getElementById("image-upload-btn"),toggle:function(){var e,t;null===(e=o.modal)||void 0===e||e.classList.toggle("close"),null===(t=o.overlay)||void 0===t||t.classList.toggle("close")}},a={form:document.getElementById("image-upload-form"),okButton:document.getElementById("form-ok-btn"),imgFileInput:document.getElementById("img-file"),imgURLInput:document.getElementById("img-URL"),imgFileDisplay:document.getElementById("file-name"),imgFileDisplayButton:document.getElementById("upload-button"),cancelButton:document.getElementById("form-cancel-btn"),handleFileDisplayClick:function(e){e.preventDefault(),a.imgFileInput.click()},handleFileChange:function(){var e,t;a.imgFileDisplay.value=(null===(e=a.imgFileInput.files)||void 0===e||null===(t=e.item(0))||void 0===t?void 0:t.name)||"No Image Selected"},handleSubmit:function(e){var t;e.preventDefault();var n="";if(null!==(t=a.imgFileInput.files)&&void 0!==t&&t.item(0))try{n=URL.createObjectURL(a.imgFileInput.files[0])}catch(e){console.error(e)}else n=a.imgURLInput.value;(0,r.addImage)(n,r.imageCache,i.appProps.radiusSizes.current).then((function(e){console.log("whatever"),o.toggle()})).catch((function(e){console.log("something")}))},handleCancel:function(e){a.imgURLInput.value="",a.imgFileInput.value="",a.imgFileDisplay.value="",o.toggle()}},l=function(){var e,t,n,i;null===(e=o.overlay)||void 0===e||e.addEventListener("click",o.toggle),null===(t=o.openButton)||void 0===t||t.addEventListener("click",o.toggle),null===(n=a.form)||void 0===n||n.addEventListener("submit",a.handleSubmit),a.imgFileDisplayButton.addEventListener("click",a.handleFileDisplayClick),a.imgFileInput.addEventListener("change",a.handleFileChange),null===(i=a.cancelButton)||void 0===i||i.addEventListener("click",a.handleCancel),document.addEventListener("keydown",(function(e){var t;null!==(t=o.modal)&&void 0!==t&&t.classList.contains("close")||"Escape"===e.key&&o.toggle()}))}},"./scripts/utility.ts":(e,t,n)=>{function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t,n,i,r,o,a,l,c,s){var u=c&&s?2*s/(c+s):1,d=e-r,v=t-o,y=(d*(n-a)+v*(i-l))/(Math.pow(d,2)+Math.pow(v,2))*u;return{vX:n-y*d,vY:i-y*v}}function s(e,t){return[t.x-e.x,t.y-e.y]}function u(e,t){var n=document.createElement("canvas");n.height=e.height,n.width=e.width;var i=n.getContext("2d");i.drawImage(e,0,0,n.width,n.height);for(var r=e.width/t.w,o=e.height/t.h,a=Math.ceil(Math.log(r>=o?o:r)/Math.log(2)),l=document.createElement("canvas"),c=l.getContext("2d"),s=1;s<a;s++)l.width=n.width/2,l.height=n.height/2,c.drawImage(n,0,0,l.width,l.height),n.width=l.width,n.height=l.height,i.drawImage(l,0,0);return l.width=t.w,l.height=t.h,c.drawImage(n,0,0,l.width,l.height),l}function d(e,t){var n=a(s(e,t),2),i=n[0],r=n[1];return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))}function v(e,t,n,i){var r=e*n+t*i,o=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));return Math.acos(r/(o*a))*(180/Math.PI)}function y(e,t,n){var i={x:e.x-n.x,y:e.y-n.y},o={x:t.x-n.x,y:t.y-n.y},a=o.x-i.x,l=o.y-i.y,c=d(i,o),s=i.x*o.y-o.x*i.y,u=l<0?-1:1,v=Math.pow(n.r,2),y=Math.pow(c,2),p=v*y-Math.pow(s,2),f=p<0?0:0===p?1:2;if(p<0)return[f,null,null];var h=Math.sqrt(p),g=(s*l+u*a*h)/y+n.x,m=(-1*s*a+Math.abs(l)*h)/y+n.y,b=(s*l-u*a*h)/y+n.x,w=(-1*s*a-Math.abs(l)*h)/y+n.y,x={x:g,y:m},O={x:b,y:w};return(g>b||g===b&&m>w)&&(O=r({},x),x={x:b,y:w}),[f,x,0===p?null:O]}n.r(t),n.d(t,{util:()=>p});var p={calculateCollisionVelocity:c,createCircleImg:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;return new Promise((function(r,o){var a=document.createElement("canvas"),l=2*t;a.width=l,a.height=l;var c=document.createElement("img");c.src=e,c.onload=function(){var e=c.width/l,o=c.height/l;e>=o?a.width=Math.floor(c.width/o):a.height=Math.floor(c.height/e);var s=u(c,{w:l,h:l}),d=a.getContext("2d");if(null===d)throw new Error("context2D is null");d.drawImage(s,0,0,a.width,a.height),d.beginPath(),d.arc(a.width/2,a.height/2,t,0,2*Math.PI),d.closePath(),d.lineWidth=i,d.strokeStyle=n,d.stroke(),d.globalCompositeOperation="destination-in",d.arc(a.width/2,a.height/2,t,0,2*Math.PI),d.fill(),r(createImageBitmap(a,a.width/2-t,a.height/2-t,l,l))},c.onerror=o}))},convertBmpToBlob:function(e){return new Promise((function(t,n){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r,o=i.getContext("bitmaprenderer");o?o.transferFromImageBitmap(e):null===(r=i.getContext("2d"))||void 0===r||r.drawImage(e,0,0);i.toBlob((function(e){null===e&&n("Blob is null"),t(e)}))}))},getBallCollisionVelocity:function(e,t){return c(e.position.x,e.position.y,e.velocity.vX,e.velocity.vY,t.position.x,t.position.y,t.velocity.vX,t.velocity.vY)},xyDiffBetweenPoints:s,angleBetween2DVector:v,angleBetween3Points:function(e,t,n){return v(t.x-e.x,t.y-e.y,n.x-t.x,n.y-t.y)},distanceBetween2Points:d,circleLineIntersect:y,maxIntersectHeight:function(e,t){var n=d({x:e.x,y:e.y},{x:t.x,y:t.y}),i=n-e.r-t.r;if(i>=0)return 0;var o=(e.r+.5*i)/n,l={x:(1-o)*e.x+o*t.x,y:(1-o)*e.y+o*t.y},c=r(r({},l),{},{y:l.y+1}),s=a(y(l,c,e),3),u=(s[0],s[1]),v=s[2],p=a(y(l,c,t),3),f=(p[0],p[1]),h=p[2],g=[u.y,v.y,f.y,h.y].sort();return g[2]-g[1]},maxIntersectWidth:function(e,t){var n=d({x:e.x,y:e.y},{x:t.x,y:t.y}),i=n-e.r-t.r;if(i>=0)return 0;var o=(e.r+.5*i)/n,l={x:(1-o)*e.x+o*t.x,y:(1-o)*e.y+o*t.y},c=r(r({},l),{},{x:l.x+1}),s=a(y(l,c,e),3),u=(s[0],s[1]),v=s[2],p=a(y(l,c,t),3),f=(p[0],p[1]),h=p[2],g=[u.x,v.x,f.x,h.x].sort();return g[2]-g[1]}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{n.r(i);var e=n("./scripts/app.ts"),t=n("./scripts/modal.ts");(0,e.init)(),(0,t.modalInit)()})()})();
//# sourceMappingURL=main.bundle.js.map